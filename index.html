<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sadaf Battle Hub Pro - 24h Update</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --neon: #00f2ff; --pink: #ff0055; --gold: #ffcc00; --bg: #0a0a12; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; text-align: center; }
        
        .header { margin-top: 20px; text-shadow: 0 0 15px var(--neon); }
        .score-box { font-size: 1.5rem; color: var(--gold); margin: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 15px; display: inline-block; }

        /* Timer Style */
        .timer-text { font-size: 0.9rem; color: #ff4444; margin-top: 5px; font-weight: bold; }

        /* Game UI */
        .candy-grid { display: grid; grid-template-columns: repeat(6, 50px); gap: 5px; justify-content: center; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 20px; border: 2px solid var(--pink); }
        .candy { width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; transition: 0.2s; background: rgba(0,0,0,0.3); border-radius: 10px; }
        .candy:active { transform: scale(0.9); }

        .btn-main { padding: 12px 25px; border: 2px solid var(--neon); background: transparent; color: white; border-radius: 30px; cursor: pointer; font-weight: bold; margin: 10px; }
        .btn-main:disabled { border-color: #555; color: #555; cursor: not-allowed; }

        /* Lucky Spin Modal */
        #spin-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .spin-box { background: #111; border: 3px solid var(--gold); padding: 30px; border-radius: 30px; width: 85%; max-width: 350px; }
        #wheel { width: 200px; height: 200px; border: 5px solid var(--gold); border-radius: 50%; margin: 20px auto; transition: 4s cubic-bezier(0.15, 0, 0.15, 1); background: conic-gradient(#222 0deg, #333 60deg, #222 120deg, #333 180deg, #222 240deg, #333 300deg); }
    </style>
</head>
<body>

    <h1 class="header">BATTLE HUB <span style="color:var(--neon)">PRO</span></h1>
    <div class="score-box">ü™ô Points: <span id="points-display">0</span></div>

    <div id="candy-section">
        <div class="candy-grid" id="board"></div>
        <button class="btn-main" onclick="initCandy()">SHUFFLE</button>
        <button class="btn-main" id="spin-trigger-btn" onclick="openSpin()">LUCKY SPIN üéÅ</button>
        <div id="main-timer" class="timer-text"></div>
    </div>

    <div id="spin-modal">
        <div class="spin-box">
            <h2 style="color:var(--gold)">DAILY LUCKY SPIN</h2>
            <div id="wheel"></div>
            <button class="btn-main" id="spin-btn" style="border-color:var(--gold); color:var(--gold);" onclick="startSpin()">SPIN NOW</button>
            <div id="modal-timer" class="timer-text"></div>
            <button onclick="closeSpin()" style="background:none; border:none; color:gray; margin-top:15px; cursor:pointer;">Close</button>
        </div>
    </div>

    <script>
        let points = parseInt(localStorage.getItem('sadaf_points')) || 100;
        let lastSpinTime = parseInt(localStorage.getItem('sadaf_last_spin')) || 0;

        function updateDisplay() {
            document.getElementById('points-display').innerText = points;
            localStorage.setItem('sadaf_points', points);
            check24hTimer();
        }

        // --- 24 Hour Timer Logic ---
        function check24hTimer() {
            const now = Date.now();
            const dayInMs = 24 * 60 * 60 * 1000;
            const timeLeft = dayInMs - (now - lastSpinTime);

            const spinBtn = document.getElementById('spin-btn');
            const triggerBtn = document.getElementById('spin-trigger-btn');
            const mainTimer = document.getElementById('main-timer');
            const modalTimer = document.getElementById('modal-timer');

            if (timeLeft > 0) {
                const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                const mins = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const secs = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                const timerStr = `Next Spin in: ${hours}h ${mins}m ${secs}s`;
                mainTimer.innerText = timerStr;
                modalTimer.innerText = timerStr;
                spinBtn.disabled = true;
                spinBtn.innerText = "LOCKED";
            } else {
                mainTimer.innerText = "Ready to Spin!";
                modalTimer.innerText = "Available Now!";
                spinBtn.disabled = false;
                spinBtn.innerText = "SPIN NOW";
            }
        }

        setInterval(check24hTimer, 1000);

        // --- Spin Logic ---
        function openSpin() { document.getElementById('spin-modal').style.display = 'flex'; }
        function closeSpin() { document.getElementById('spin-modal').style.display = 'none'; }

        function startSpin() {
            const wheel = document.getElementById('wheel');
            const deg = 3600 + Math.random() * 3600;
            wheel.style.transform = `rotate(${deg}deg)`;
            document.getElementById('spin-btn').disabled = true;

            setTimeout(() => {
                const winAmount = [50, 100, 20, 200, 10, 500][Math.floor(Math.random()*6)];
                points += winAmount;
                lastSpinTime = Date.now();
                localStorage.setItem('sadaf_last_spin', lastSpinTime);
                
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                alert(`Sweet! You won ${winAmount} points!`);
                updateDisplay();
                closeSpin();
            }, 4000);
        }

        // --- Candy Match Logic (Simple) ---
        const icons = ['üç≠', 'üç¨', 'üç©', 'üç´', 'üßÅ', 'üç™'];
        function initCandy() {
            const b = document.getElementById('board');
            b.innerHTML = '';
            for(let i=0; i<36; i++) {
                const d = document.createElement('div');
                d.className = 'candy';
                d.innerText = icons[Math.floor(Math.random()*icons.length)];
                d.onclick = () => {
                    points += 2;
                    d.style.transform = "scale(0)";
                    setTimeout(() => { d.style.transform = "scale(1)"; d.innerText = icons[Math.floor(Math.random()*icons.length)]; }, 300);
                    updateDisplay();
                };
                b.appendChild(d);
            }
        }

        window.onload = () => {
            updateDisplay();
            initCandy();
        };
    </script>
</body>
</html>
