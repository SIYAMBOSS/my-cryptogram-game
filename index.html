<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sadaf Hub Pro | Ultimate Edition</title>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --blue: #00f2ff;
            --pink: #ff00ff;
            --gold: #ffcc00;
            --bg: #05050a;
            --card: rgba(255, 255, 255, 0.05);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body {
            background: var(--bg); color: white; font-family: 'Rajdhani', sans-serif;
            margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden; min-height: 100vh;
        }

        /* --- Header UI --- */
        .header {
            width: 100%; padding: 15px; display: flex; justify-content: space-between; align-items: center;
            background: var(--card); backdrop-filter: blur(10px); border-bottom: 1px solid #333;
            position: sticky; top: 0; z-index: 1000;
        }

        .coin-display {
            font-family: 'Orbitron'; color: var(--gold); font-size: 1.2rem;
            font-weight: 900; text-shadow: 0 0 10px rgba(255, 204, 0, 0.4);
        }

        /* --- Notification Pop --- */
        #boss-notif {
            position: fixed; top: 80px; right: 15px; width: 280px; 
            background: linear-gradient(135deg, #111, #222); border-left: 5px solid var(--gold);
            padding: 15px; border-radius: 12px; display: none; z-index: 5000;
            box-shadow: 0 15px 35px rgba(0,0,0,0.8); animation: slideIn 0.5s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }
        @keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }

        /* --- Main UI Buttons --- */
        .action-bar { display: flex; gap: 10px; margin: 20px 0; width: 90%; justify-content: center; }
        .btn-icon {
            flex: 1; background: var(--card); border: 1px solid #333; color: white;
            padding: 12px; border-radius: 15px; font-family: 'Orbitron'; font-size: 0.7rem;
            display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer;
            transition: 0.3s;
        }
        .btn-icon:active { transform: scale(0.95); border-color: var(--blue); }
        .btn-icon i-emoji { font-size: 1.5rem; }

        /* --- Boro Bet Box --- */
        .bet-container {
            width: 90%; max-width: 400px; background: rgba(0, 242, 255, 0.05);
            border: 2px solid var(--blue); border-radius: 20px; padding: 20px;
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; box-shadow: 0 0 20px rgba(0, 242, 255, 0.1);
        }
        .bet-label { font-family: 'Orbitron'; font-size: 1.4rem; font-weight: 900; }

        /* --- Game Grid (5x5) --- */
        .grid {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px;
            width: 92vw; max-width: 400px; margin-bottom: 20px;
        }
        .cell {
            aspect-ratio: 1; background: #0f0f1a; border: 1px solid #222;
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-size: 2rem; cursor: pointer; transition: 0.2s;
        }
        .cell:active { background: #1a1a2e; }
        .cell.win-glow { animation: winPulse 0.5s infinite; border-color: var(--gold); }
        @keyframes winPulse { 0% { box-shadow: 0 0 5px var(--gold); } 50% { box-shadow: 0 0 20px var(--gold); } 100% { box-shadow: 0 0 5px var(--gold); } }

        /* --- Modals --- */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.96); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 10000; padding: 20px; }
        .modal-content { background: #0f0f15; border: 2px solid var(--blue); border-radius: 30px; padding: 30px; width: 100%; max-width: 400px; text-align: center; }
        
        /* --- Daily Spin Wheel --- */
        .wheel-box {
            width: 160px; height: 160px; border: 6px dashed var(--pink); border-radius: 50%;
            margin: 20px auto; display: flex; align-items: center; justify-content: center;
            font-size: 3rem; transition: 4s cubic-bezier(0.1, 0.8, 0.2, 1);
        }

        /* --- Input Fields --- */
        .pro-input { width: 100%; padding: 15px; background: #000; border: 1px solid #333; color: white; border-radius: 15px; margin-bottom: 12px; font-size: 1rem; }
        .pro-input:focus { border-color: var(--blue); }

        #login-screen { position: fixed; inset: 0; background: var(--bg); z-index: 20000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

    <div id="boss-notif">
        <div style="color:var(--gold); font-family:'Orbitron'; font-size:0.8rem;">‚ö° BOSS MESSAGE</div>
        <div id="msg-text" style="margin: 8px 0; font-size: 1rem;"></div>
        <div style="font-size: 0.7rem; color: #666;">Tap to dismiss</div>
    </div>

    <div id="login-screen">
        <div style="font-size: 4rem; margin-bottom: 10px;">üéÆ</div>
        <h1 style="font-family:'Orbitron'; color:var(--blue); margin-bottom: 30px;">SADAF HUB PRO</h1>
        <input type="text" id="user-name" class="pro-input" style="width: 280px; text-align: center;" placeholder="Enter Nickname">
        <button class="btn-icon" style="width: 280px; height: 55px; font-size: 1.1rem; border-color: var(--blue);" onclick="login()">START MISSION</button>
    </div>

    <div class="header">
        <div class="coin-display">ü™ô <span id="balance">0</span></div>
        <div id="user-tag" style="font-size: 0.8rem; color: var(--blue); font-family: 'Orbitron';"></div>
        <button id="boss-btn" class="btn-icon" style="flex:none; border-color:red; color:red; display:none;" onclick="openModal('boss-modal')">BOSS</button>
    </div>

    <div class="action-bar">
        <div class="btn-icon" onclick="openModal('gift-modal')">
            <span style="font-size: 1.5rem;">üéÅ</span>
            <span>DAILY GIFT</span>
        </div>
        <div class="btn-icon" onclick="openModal('invite-modal')">
            <span style="font-size: 1.5rem;">‚úâÔ∏è</span>
            <span>INVITE</span>
        </div>
        <div class="btn-icon" onclick="alert('Shop Coming Soon!')">
            <span style="font-size: 1.5rem;">üõí</span>
            <span>SHOP</span>
        </div>
    </div>

    <div class="bet-container">
        <div class="bet-label">BET: <span id="bet-amt">50</span></div>
        <div style="display:flex; gap:12px;">
            <button class="btn-icon" style="padding: 10px 20px; font-size: 1.2rem;" onclick="changeBet(-50)">-</button>
            <button class="btn-icon" style="padding: 10px 20px; font-size: 1.2rem;" onclick="changeBet(50)">+</button>
        </div>
    </div>

    <div class="grid" id="board"></div>

    <div id="invite-modal" class="modal">
        <div class="modal-content">
            <h2 style="font-family:'Orbitron'; color:var(--blue)">INVITE FRIENDS</h2>
            <p>Share your link and get <span style="color:var(--gold)">200 Coins</span> per invite!</p>
            <button class="btn-icon" style="width:100%; height:50px; background:#0084ff; border:none; margin-bottom:12px;" onclick="doInvite('messenger')">MESSENGER</button>
            <button class="btn-icon" style="width:100%; height:50px; border-color:var(--gold); color:var(--gold);" onclick="doInvite('copy')">COPY LINK</button>
            <button class="btn-icon" style="width:100%; margin-top:20px; border-color:#444" onclick="closeModal('invite-modal')">CLOSE</button>
        </div>
    </div>

    <div id="gift-modal" class="modal">
        <div class="modal-content" style="border-color:var(--pink)">
            <h2 style="font-family:'Orbitron'; color:var(--pink)">LUCKY SPIN</h2>
            <div class="wheel-box" id="wheel">üéÅ</div>
            <div id="timer" style="color:#888; margin-top:10px;"></div>
            <button id="spin-btn" class="btn-icon" style="width:100%; height:55px; background:var(--pink); border:none; margin-top:20px; font-size:1.1rem" onclick="spinGift()">SPIN NOW</button>
            <button class="btn-icon" style="width:100%; margin-top:10px; border-color:#444" onclick="closeModal('gift-modal')">CLOSE</button>
        </div>
    </div>

    <div id="boss-modal" class="modal">
        <div class="modal-content" style="border-color:red">
            <h2 style="font-family:'Orbitron'; color:red">ADMIN PANEL</h2>
            <input type="number" id="gift-val" class="pro-input" placeholder="Coin Amount">
            <textarea id="gift-sms" class="pro-input" style="height:80px" placeholder="Boss Message..."></textarea>
            <button class="btn-icon" style="width:100%; height:50px; background:red; border:none;" onclick="bossSend()">SEND TO USER</button>
            <button class="btn-icon" style="width:100%; margin-top:10px; border-color:#444" onclick="closeModal('boss-modal')">EXIT</button>
        </div>
    </div>

    <audio id="sfx-click" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>

    <script>
        const TG_TOKEN = "8536299808:AAHJFWEna66RMHZdq-AV20Ak1KOOSwTJT9k";
        const TG_CHAT = "7416528268";

        let pts = parseInt(localStorage.getItem('sadaf_pts')) || 1000;
        let lastSpin = localStorage.getItem('sadaf_spin_time') || 0;
        let myName = localStorage.getItem('sadaf_user') || "";
        let board = Array(25).fill(null);
        let active = true;

        // --- Core Functions ---
        function login() {
            let n = document.getElementById('user-name').value.trim();
            if(!n) return;
            localStorage.setItem('sadaf_user', n);
            myName = n;
            setup();
            notifyTelegram(n);
        }

        function setup() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('user-tag').innerText = myName.toUpperCase();
            if(myName === "SIYAMBOSS") document.getElementById('boss-btn').style.display = 'flex';
            updateUI();
            renderBoard();
            checkBossUpdate();
        }

        async function notifyTelegram(name) {
            const count = Math.floor(Math.random() * 5000);
            const text = `üî• *NEW USER JOINED*\nüë§ Name: ${name}\nüÜî User No: #${count}\nü™ô Balance: ${pts}`;
            await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage?chat_id=${TG_CHAT}&text=${encodeURIComponent(text)}&parse_mode=Markdown`);
        }

        function renderBoard() {
            const container = document.getElementById('board');
            container.innerHTML = '';
            board.forEach((val, i) => {
                const cell = document.createElement('div');
                cell.className = 'cell';
                if(val === 'O') { cell.innerText = 'O'; cell.style.color = 'var(--blue)'; }
                if(val === 'X') { cell.innerText = 'X'; cell.style.color = 'var(--pink)'; }
                cell.onclick = () => playerMove(i);
                container.appendChild(cell);
            });
        }

        function playerMove(i) {
            if(!board[i] && active) {
                if(pts < 50) return alert("No coins!");
                board[i] = 'O';
                document.getElementById('sfx-click').play();
                renderBoard();
                if(checkWin('O')) return endMatch(true);
                active = false;
                setTimeout(aiMove, 600);
            }
        }

        function aiMove() {
            let empty = board.map((v, i) => v === null ? i : null).filter(v => v !== null);
            if(empty.length > 0) {
                let move = empty[Math.floor(Math.random() * empty.length)];
                board[move] = 'X';
                renderBoard();
                if(checkWin('X')) return endMatch(false);
                active = true;
            }
        }

        function checkWin(p) {
            for (let i = 0; i < 25; i++) {
                if (board[i] !== p) continue;
                let r = Math.floor(i / 5), c = i % 5;
                if (c <= 1 && board[i+1]===p && board[i+2]===p && board[i+3]===p) return true;
                if (r <= 1 && board[i+5]===p && board[i+10]===p && board[i+15]===p) return true;
                if (r <= 1 && c <= 1 && board[i+6]===p && board[i+12]===p && board[i+18]===p) return true;
                if (r <= 1 && c >= 3 && board[i+4]===p && board[i+8]===p && board[i+12]===p) return true;
            }
            return false;
        }

        function endMatch(won) {
            if(won) { confetti(); pts += 50; alert("BRO, YOU WON!"); }
            else { pts -= 50; alert("AI WON!"); }
            updateUI();
            board.fill(null);
            active = true;
            renderBoard();
        }

        // --- Social & Invite ---
        function doInvite(type) {
            const link = window.location.href + "?ref=" + myName;
            if(type === 'messenger') {
                window.location.href = "fb-messenger://share/?link=" + encodeURIComponent(link);
            } else {
                navigator.clipboard.writeText(link);
                alert("Link Copied! You get 200 coins per invite.");
            }
            pts += 200; updateUI(); confetti();
        }

        // --- Daily Gift (24h) ---
        function spinGift() {
            const now = Date.now();
            if(now - lastSpin < 24*60*60*1000) return;
            
            const wheel = document.getElementById('wheel');
            wheel.style.transform = "rotate(1440deg)";
            
            setTimeout(() => {
                const prize = 500;
                pts += prize;
                lastSpin = Date.now();
                localStorage.setItem('sadaf_spin_time', lastSpin);
                updateUI();
                confetti();
                alert(`CONGRATS! YOU GOT ${prize} COINS!`);
                wheel.style.transform = "rotate(0deg)";
                closeModal('gift-modal');
            }, 4000);
        }

        // --- Boss Controls ---
        function bossSend() {
            const gift = document.getElementById('gift-val').value;
            const sms = document.getElementById('gift-sms').value;
            localStorage.setItem('boss_sms', sms);
            localStorage.setItem('boss_gift', gift);
            alert("Sent successfully!");
            closeModal('boss-modal');
        }

        function checkBossUpdate() {
            const sms = localStorage.getItem('boss_sms');
            if(sms) {
                const notif = document.getElementById('boss-notif');
                document.getElementById('msg-text').innerText = sms;
                notif.style.display = 'block';
                
                const gift = parseInt(localStorage.getItem('boss_gift')) || 0;
                if(gift > 0) { pts += gift; updateUI(); }
                
                notif.onclick = () => {
                    notif.style.display = 'none';
                    localStorage.removeItem('boss_sms');
                    localStorage.removeItem('boss_gift');
                };
            }
        }

        function updateUI() {
            document.getElementById('balance').innerText = pts;
            localStorage.setItem('sadaf_pts', pts);
            
            // Update Spin Timer
            const timer = document.getElementById('timer');
            const now = Date.now();
            const left = 24*60*60*1000 - (now - lastSpin);
            if(left > 0) {
                document.getElementById('spin-btn').disabled = true;
                document.getElementById('spin-btn').style.opacity = "0.5";
                const h = Math.floor(left / 3600000);
                const m = Math.floor((left % 3600000) / 60000);
                timer.innerText = `Next Spin in ${h}h ${m}m`;
            } else {
                document.getElementById('spin-btn').disabled = false;
                document.getElementById('spin-btn').style.opacity = "1";
                timer.innerText = "Ready to Spin!";
            }
        }

        function changeBet(v) {
            if(pts < 100) return;
            // Simplified bet for now
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        window.onload = () => { if(myName) setup(); };
    </script>
</body>
            </html>
